"use strict";(self.webpackChunkMetaWall=self.webpackChunkMetaWall||[]).push([[279],{2279:(y,p,d)=>{d.r(p),d.d(p,{AddPostModule:()=>P});var a=d(9808),r=d(2382),t=d(1223);let m=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[a.ez]]}),e})();var c=d(5425),g=d(9450),f=d(7128),h=d(9451),C=d(2313);let A=(()=>{class e{constructor(o){this.titleServer=o}ngOnInit(){this.titleServer.setTitle(`${this.title} | ${h.Y.name}`)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(C.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-title"]],inputs:{title:"title"},decls:2,vars:1,consts:[[1,"border","text-center","h5","font-azeretMono","fw-bold","py-4","bg-white","left-box-shadow"]],template:function(o,n){1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA()),2&o&&(t.xp6(1),t.Oqu(n.title))},styles:[""]}),e})();function v(e,s){if(1&e&&(t.TgZ(0,"div",13),t._uU(1,"\u5716\u7247\u7db2\u5740\u683c\u5f0f\u932f\u8aa4\uff0c\u9808\u70ba https \u70ba\u958b\u982d"),t.qZA()),2&e){t.oxw();const o=t.MAs(10);t.ekj("d-block",o.errors&&o.errors.pattern)}}const M=[{path:"",component:(()=>{class e{constructor(o,n){this.pageService=o,this.postService=n,this.post={content:"",image:""},this.uploadErrs=[]}ngOnInit(){this.pageService["components.header.visible"]=!0,this.pageService["components.right-nav.visible"]=!0}upload(o){if(this.uploadErrs.length=0,1===o.target.files.length){const n=o.target.files[0],l=n.name.search(/\.(jpg|png)$/i)>-1,i=1>n.size/1024/1024;if(l&&i){const u=new FileReader;u.onloadend=()=>{this.post.image=u.result},u.readAsDataURL(n)}else l||this.addUploadErrs("\u5716\u7247\u683c\u5f0f\u932f\u8aa4\uff0c\u50c5\u9650 JPG\u3001PNG \u5716\u7247"),i||this.addUploadErrs("\u5716\u7247\u6a94\u6848\u904e\u5927\uff0c\u50c5\u9650 1mb \u4ee5\u4e0b\u6a94\u6848")}}addUploadErrs(o){this.uploadErrs.push(o)}delImage(){this.uploadErrs.length=0,this.post.image=""}trackByFn(o,n){return n}addPost(){this.postService.addPost(this.post).subscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(g.P),t.Y36(f.L))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-post"]],decls:15,vars:6,consts:[[3,"title"],[3,"ngSubmit"],["validateForm","ngForm"],[1,"card","mt-4"],[1,"card-body","p-6"],["for","postContent",1,"form-label"],["id","postContent","rows","5","placeholder","\u8f38\u5165\u60a8\u7684\u8cbc\u6587\u5167\u5bb9","name","content","required","",1,"form-control",3,"ngModel","ngModelChange"],["content","ngModel"],["type","text","placeholder","\u8acb\u8f38\u5165\u60a8\u7684\u8cbc\u6587\u5716\u7247\u7db2\u5740","name","image","id","name","pattern","^(https:\\/\\/)[^\\s]+",1,"form-control","my-4",3,"ngModel","ngModelChange"],["image","ngModel"],["class","invalid-feedback text-center",3,"d-block",4,"ngIf"],[1,"d-grid","gap-2","col-md-9","mx-auto","mt-4",3,"ngClass"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback","text-center"]],template:function(o,n){if(1&o&&(t._UZ(0,"app-title",0),t.TgZ(1,"form",1,2),t.NdJ("ngSubmit",function(){return n.addPost()}),t.TgZ(3,"div",3)(4,"div",4)(5,"label",5),t._uU(6,"\u8cbc\u6587\u5167\u5bb9*"),t.qZA(),t.TgZ(7,"textarea",6,7),t.NdJ("ngModelChange",function(i){return n.post.content=i}),t.qZA(),t.TgZ(9,"input",8,9),t.NdJ("ngModelChange",function(i){return n.post.image=i}),t.qZA(),t.YNc(11,v,2,2,"div",10),t.TgZ(12,"div",11)(13,"button",12),t._uU(14,"\u9001\u51fa\u8cbc\u6587"),t.qZA()()()()()),2&o){const l=t.MAs(2),i=t.MAs(10);t.Q6J("title","\u5f35\u8cbc\u52d5\u614b"),t.xp6(7),t.Q6J("ngModel",n.post.content),t.xp6(2),t.Q6J("ngModel",n.post.image),t.xp6(2),t.Q6J("ngIf",i.invalid&&(i.dirty||i.touched)),t.xp6(1),t.Q6J("ngClass",l.invalid||n.uploadErrs.length?"mt-4":"mt-6"),t.xp6(1),t.Q6J("disabled",l.invalid||n.uploadErrs.length)}},directives:[A,r._Y,r.JL,r.F,r.Fj,r.Q7,r.JJ,r.On,r.c5,a.O5,a.mk],styles:[""]}),e})()}];let B=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.Bz.forChild(M)],c.Bz]}),e})(),P=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[a.ez,r.u5,B,m]]}),e})()}}]);