"use strict";(self.webpackChunkMetaWall=self.webpackChunkMetaWall||[]).push([[279],{2279:(Z,c,l)=>{l.r(c),l.d(c,{AddPostModule:()=>B});var d=l(9808),u=l(2382),t=l(1223);let m=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez]]}),e})();var p=l(5425),g=l(9450),f=l(7128),h=l(9451),A=l(2313);let C=(()=>{class e{constructor(n){this.titleServer=n}ngOnInit(){this.titleServer.setTitle(`${this.title} | ${h.Y.name}`)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(A.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-title"]],inputs:{title:"title"},decls:2,vars:1,consts:[[1,"border","text-center","h5","font-azeretMono","fw-bold","py-4","bg-white","left-box-shadow"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA()),2&n&&(t.xp6(1),t.Oqu(o.title))},styles:[""]}),e})();function b(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){return t.CHM(n),t.oxw().delImage()}),t._uU(1,"\u522a\u9664\u5716\u7247"),t.qZA()}}function y(e,s){if(1&e&&t._UZ(0,"img",14),2&e){const n=t.oxw();t.Q6J("src",n.post.image,t.LSH)}}function T(e,s){if(1&e&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.Oqu(n)}}function v(e,s){if(1&e&&(t.TgZ(0,"ul",15),t.YNc(1,T,2,1,"li",16),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.uploadErrs)("ngForTrackBy",n.trackByFn)}}const P=[{path:"",component:(()=>{class e{constructor(n,o){this.pageService=n,this.postService=o,this.post={content:"",image:""},this.uploadErrs=[]}ngOnInit(){this.pageService["components.header.visible"]=!0,this.pageService["components.right-nav.visible"]=!0}upload(n){if(this.uploadErrs.length=0,1===n.target.files.length){const o=n.target.files[0],i=o.name.search(/\.(jpg|png)$/i)>-1,r=1>o.size/1024/1024;if(i&&r){const a=new FileReader;a.onloadend=()=>{this.post.image=a.result},a.readAsDataURL(o)}else i||this.addUploadErrs("\u5716\u7247\u683c\u5f0f\u932f\u8aa4\uff0c\u50c5\u9650 JPG\u3001PNG \u5716\u7247"),r||this.addUploadErrs("\u5716\u7247\u6a94\u6848\u904e\u5927\uff0c\u50c5\u9650 1mb \u4ee5\u4e0b\u6a94\u6848")}}addUploadErrs(n){this.uploadErrs.push(n)}delImage(){this.uploadErrs.length=0,this.post.image=""}trackByFn(n,o){return o}addPost(){this.postService.addPost(this.post).subscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.P),t.Y36(f.L))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-post"]],decls:16,vars:6,consts:[[3,"title"],[1,"card","mt-4"],[1,"card-body","p-6"],["for","postContent",1,"form-label"],["id","postContent","rows","5","placeholder","\u8f38\u5165\u60a8\u7684\u8cbc\u6587\u5167\u5bb9",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-dark","btn-sm","px-6","my-4"],["type","file","accept",".jpg, .png","name","file",1,"d-none",3,"change"],["type","button","class","btn btn-link btn-sm fs-8",3,"click",4,"ngIf"],["class","img-fluid d-block border rounded","alt","\u8cbc\u6587\u5716\u7247",3,"src",4,"ngIf"],["class","list-unstyled mb-0 mt-3 fs-7 text-danger text-center",4,"ngIf"],[1,"d-grid","gap-2","col-md-9","mx-auto","mt-6"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-link","btn-sm","fs-8",3,"click"],["alt","\u8cbc\u6587\u5716\u7247",1,"img-fluid","d-block","border","rounded",3,"src"],[1,"list-unstyled","mb-0","mt-3","fs-7","text-danger","text-center"],[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(n,o){1&n&&(t._UZ(0,"app-title",0),t.TgZ(1,"div",1)(2,"div",2)(3,"label",3),t._uU(4,"\u8cbc\u6587\u5167\u5bb9*"),t.qZA(),t.TgZ(5,"textarea",4),t.NdJ("ngModelChange",function(r){return o.post.content=r}),t.qZA(),t.TgZ(6,"div",5)(7,"label",6)(8,"input",7),t.NdJ("change",function(r){return o.upload(r)}),t.qZA(),t._uU(9,"\u4e0a\u50b3\u5716\u7247 "),t.qZA(),t.YNc(10,b,2,0,"button",8),t.qZA(),t.YNc(11,y,1,1,"img",9),t.YNc(12,v,2,2,"ul",10),t.TgZ(13,"div",11)(14,"button",12),t.NdJ("click",function(){return o.addPost()}),t._uU(15,"\u9001\u51fa\u8cbc\u6587"),t.qZA()()()()),2&n&&(t.Q6J("title","\u5f35\u8cbc\u52d5\u614b"),t.xp6(5),t.Q6J("ngModel",o.post.content),t.xp6(5),t.Q6J("ngIf",o.post.image),t.xp6(1),t.Q6J("ngIf",o.post.image),t.xp6(1),t.Q6J("ngIf",o.uploadErrs.length),t.xp6(2),t.Q6J("disabled",!o.post.content||o.uploadErrs.length))},directives:[C,u.Fj,u.JJ,u.On,d.O5,d.sg],styles:[""]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.Bz.forChild(P)],p.Bz]}),e})(),B=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,u.u5,x,m]]}),e})()}}]);